# 第12章 对比、颜色和间距

> 本章内容
>
> * 把设计原型转化为HTML和CSS
> * 使用对比设计，把用户的注意力吸引到正确的页面部分
> * 颜色的选用
> * 充分利用空白间距
> * 使用行高



使用CSS实现设计师提供的视觉稿，是web开发中很重要的一个环节。我们做这部分工作的时候，实际上相当于是把艺术转化为代码。这种转化过程，有时候简单明了，但有时候就需要跟设计师协商，采取折衷方案。设计师对原型图每做一次小改动，我们都需要考虑如何组织CSS代码使其更容易复用。相较于单页面的原型图，我们的CSS代码应该更具通用性。

转化工作完成之后，任务来到了你的身上，作为一个开发者，你需要基于设计师的构想，继续开发网站。你应该至少有一些设计师的基本思维，从设计师的角度去思考间距、颜色和排版等，这是很重要的。你需要了解如何确保最终实现的效果是准确的。如果你认可并遵从设计师的目标，那整个过程就会比较顺利。

当然了，你可能并不总是和设计师一起工作。如果你是在一个小型创业公司或者个人项目中工作，那你只能靠自己。不管那种情况，掌握一些基本的设计原则都是很有用处的，这样你就可以自己设计了。

本章我们会介绍如何像设计师一样去思考，完成页面原型图，并将其转化为代码。我们会把主要精力放在间距和颜色的部分，也会着重介绍从设计师的角度出发，对于这部分有哪些考量。我们的目标是，在你学会了这部分内容之后，可以一定程度上应用到实际项目设计中，甚至不需要设计师参与也能进行项目工作。为了达到这一目的，我们来实现一下图12.1所示的页面。

**图12.1 为Ink协作软件设计的网页**

> [p301 图一]

屏幕快照显示的是最终完成的页面效果。如果你最开始从设计师那里拿到设计稿，可能还会带有很多附加的信息。后面你会看到那些附加信息，但首先我们要先指出设计中的一些要素。

## 12.1 对比是最重要的

当你看到图12.1所示的屏幕快照的时候，注意一下视线聚焦在哪里。大概率是被吸引到“Team collaboration done right”这句广告语和它下面的“Get started”按钮。你也会看到页面上的一些别的东西（左上角的公司名称、右上角的导航菜单、下面的三个栏目），但是图片中间的内容具有最强的吸引力。原因就在于`对比`（contrast）。

对比是设计中的一种手段，通过突出某物来达到吸引注意力的目的。我们的眼睛和思维天生对图样比较敏感，一旦某种东西破坏了图样的整体效果，我们的注意力自然而然就找上了它。

若要起到对比的效果，页面必须先建立图样，就如同必须先有了规矩才能打破规矩。在图12.1中，导航按钮之间的距离是一致的（【译者注：原文中这句话多了“Read more”，我认为这是原文的错误，意思讲不通，翻译的时候去掉了】），三个栏目的大小和间距也一样。另外，三个“Read more”按钮是完全相同的。页面上还有一些不太一样的颜色，但都是同样的绿色调，只是明暗程度不同。这也是为什么模块化CSS和模式库如此重要的原因之一（见第9章和第10章），不是使用嵌套的选择器创建一个“图文栏目中的按钮”，而是创建一个可在任意位置使用的按钮。

推进样式代码复用，就可以确保网站中使用完全一致的图样。建立统一的图样，然后打破统一，突出网页上最重要的部分，是专业设计师的一个核心思路。

使用不同的颜色、间距和尺寸是建立对比的一些常用手法。如果好几个条目都是亮色的，还有一个是暗色的，你就会首先注意到这个暗色条目。如果一个条目周围有很多无用的间距（称作`留白`），那这个条目就会比较突出。同样，较大的元素也会从一系列较小元素中脱颖而出。为了实现更强的对比效果，还可以多种方法组合使用，就像团队协作软件网站里的标语那样，它的字号更大、周围留白，还跟着一个醒目的深色按钮。

很显然，标语部分并不是页面上唯一使用对比的地方。你会发现，通过使用对比，信息的重要程度和传递效果都有了层次感。除了标语和开始按钮，导航菜单（图12.2）和页面底部的每个文字栏目（图12.3）明显也使用了对比。这些元素的对比程度不如标语部分那么强烈，但在各自的区域内部也都有吸引注意力的地方。页脚部分是整个页面里相对不太重要的内容，所以设计得很小，也没什么对比效果。

**图12.2 亮色的登录按钮比其他三个深绿色按钮更能吸引注意力**

> [p302 图一]

**图12.3 带有彩色文字和边框的按钮，在清一色黑白文字中脱颖而出**

> [p303 图一]

每个网页都是带有目的的，可能是讲述一个故事，也可能是为了收集信息，或者是要求用户完成某些任务。在核心目标之外，还可能会有导航元素、广告、文本段落，还有填满版权信息和友情链接的页脚部分等。设计师对工作是让最重要的信息突显出来，而我们作为开发者，是不要弄乱设计师的设计。

### 12.1.1 建立图样

为了创建统一的图样，有些在我们看来并没有那么重要的细节，设计师可能也会非常关注。比如某些元素之间精确的距离，比如对多个不同的组件都使用相同的边框圆角和盒阴影，甚至设计师还会关注字符的间距和文本行间距。

图12.4展示了一张原型图示例，使用像素精确标注了各个元素之间的距离。我们把设计图转化为代码的时候，保证精确还原这个过程是很枯燥的（有时候甚至是很困难的）。

原型图里使用粉色的方框来标注那些测量过的间距。例如，导航菜单里的按钮之间的距离是10px，横幅图片的底端和三个白底栏目的顶端之间的距离是40px，每个栏目的标题和后续文本段落之间的距离是30px，等等。有些固定的间距长度可能会在页面上多次重复出现，这有助于建立图样的视觉一致性。比如，10px和25px间距在这个页面上就比较通用。

下面我们进一步研究一下紧凑设计的两个方面：颜色选择和间距控制（排版这部分也非常重要，我们将在下一章重点关注）。我们将演示如何精确地还原图12.4所示的设计。同时，你要意识到网站是随时间不断演化的。还原了原型图只是完成了一部分工作，后续还要添加新特性和新内容，需要始终遵循设计师的构想。基于这个目的，我们看看做好这份工作需要考虑哪些因素。

**图12.4 带有测量标注的网页设计原型图**

> [p304 图一]

### 12.1.2 还原设计稿

先创建一张新页面，并链接新的样式表。把下面清单中的标记代码复制到页面中。我们会把整个设计页面划分成多个模块，后续章节会讲解如何编写样式。

**清单12.1 页面标记**

> [p304 代码清单一]
>
> [p305 代码清单一]
>
> Top navbar container 顶部导航容器
>
> Large hero image 巨大的主页横幅图片
>
> Three-column tile row 三栏图文区域

我们使用了BEM风格来为类命名，这样可以清楚地知道哪个元素属于哪个模块。双下划线代表模块的子元素，比如`hero__inner`；双连字符代表模块变体，比如`button--cta`（详见第9章）。我们将会以自己的方式来完成这些模块，第一步先来看看它们使用的颜色。

## 12.2 颜色

设计师交付设计稿的时候，一般你会拿到一个很大的PDF文档。文档包含几个部分，其中一个很大的部分是由整页的原型图组成，就像图12.4展示的例子这样。但在这之前，设计师需要先准备一些基础设计。PDF文档可能会包含一两页关于多种标题和正文副本的排版示例，还可能会有一些基础UI元素的详细列表，比如链接和按钮，同时包含它们的各种状态，比如鼠标悬浮和激活。此外还包括网站使用的调色板。

调色板通常就像图12.5所示的这样，会罗列出全站使用的所有颜色样本及对应的十六进制颜色值。设计师一般会为每种颜色取一个名字，后面的明细规范文档中可以使用这些命名。

**图12.5 网站的调色板**

> [p306 图一]
>
> Brand green 品牌绿
>
> Dark green 深绿色
>
> Medium green 中绿色
>
> Text color 文本颜色
>
> Gray 灰色
>
> Light gray 浅灰色
>
> Extra-light gray 特浅灰
>
> White 白色

调色板一般会有一种主颜色，其他颜色是基于主颜色的。主颜色一般从公司的品牌或者LOGO中衍生出来。这个例子中，主颜色是品牌绿（图12.5的左上角）。调色板中的其他颜色一般是同一色系不同明暗度的颜色，还有一些补充颜色。大部分调色板也会有黑色和白色（虽然可能不是纯黑白的#000000或者#ffffff），以及少量的灰色。

因为这些颜色将会在CSS中多次重复出现，将它们指定为变量可以节省很多时间。另外，如果总是一次次地输入十六进制值，没办法保证一定不出错。

我们先为页面统一添加一些基础样式，也包括为调色板中的每种颜色指定变量，以便于复用它们。图12.6所示的页面跟原型图看起来并不怎么像，但是颜色已经开始贴近原型图了。

添加这些基础样式到样式表中。

**图12.6 添加了基础样式和一些颜色的网页**

> [p307 图一]

**清单12.2 基础样式，也包括颜色变量**

> [p307 代码清单一]
>
> [p308 代码清单一]
>
> Assigns each color to a variable 为每种颜色指定变量
>
> Uses variables to assign color where needed 用到颜色的地方以变量代替
>
> Sets heading fonts 设置标题字体
>
> Uses variables to assign color where needed 用到颜色的地方以变量代替
>
> Placeholder for active links. You’ll need a red color for this later on. 先为链接激活状态占个位，后面需要改成红色

这里我们对颜色使用了自定义变量（如果需要复习一下相关知识，见第2章2.6节）。使用变量以后，一旦后续有需要修改这些值，会节省很多工作。我曾经参与过的一个项目，已经进行到后期了，设计师决定调整品牌颜色。我只需要在一个地方修改一下变量，非常简单，但实际上已经修改了代码里所有用到变量的地方。

> **注意**
>
> 为简单起见，我们在例子中直接使用了CSS自定义属性，你也可以在自己的项目中使用，不需要额外安装特定工具。但如果你的项目需要支持IE或者其他更老的浏览器，那你就需要使用预处理器变量来替代。可以参考附录B中关于预处理器的介绍。

这里我们对激活状态下的链接样式占了个位置，后面还会回过头来填充颜色。在此之前，我们先为页面粗略地布局一下。我们先把页面涉及的各主要区域放在正确的位置，然后添加一些颜色和字体设置（如图12.7）。这里先不要关注间距问题。

**图12.7 页面元素粗略布局，并添加初始样式**

> [p308 图片一]

我们从顶部开始，分三个部分来工作：头部区域、主页横幅区域和三栏内容主区域。大部分工作都可以复用前面章节讲到的技术。然后我们再回过头来调整页面细节。

首先是头部以及导航条区域。这部分由三个模块组成：`nav-container`、`home-link`和`top-nav`，已展示在下列清单中，把代码添加到样式表。

**清单12.3 头部样式**

> [p309 代码清单一]
>
> Centers the contents and restricts their width to 1,080 px 设置内容对齐方式，限制最大宽度为1080px
>
> Uses flexbox to display nav items in a row 使用弹性布局将导航项展示为一行
>
> Adds color and padding to each nav item link 为每个导航链接添加颜色和内边距

整个头部区域包裹了一个`nav-container`类。这里我们使用了双容器的模式来使内部的元素居中（可以回顾一下第4章相关内容）。这样可以实现背景颜色一直延伸到页面边缘，而主内容区域却被限制了宽度。主内容区域是一个弹性盒容器，使用`justify-content: space-between`将内容置于两端：`home-link`在左侧，`top-nav`在右侧。`top-nav`也使用了弹性布局，这样其内部的所有链接都排列为一行，同时链接的颜色使用自定义属性进行了配置。

接下来，我们为主页横幅区域添加样式。这部分包括两个模块，一个是横幅图片，另一个是按钮。添加下列代码到样式表中。

**清单12.4 横幅图片和按钮样式**

> [p310 代码清单一]
>
> Double-container pattern 双容器模式
>
> Uses padding to roughly position the slogan and button 简单使用内边距为标语和按钮定位
>
> Standard button styles 标准按钮样式
>
> CTA button variant CTA按钮变体

跟头部一样，横幅区域也使用了双容器模式。内容器设置了一些内边距，这里的内边距值只是粗略地估算的。区域布局完成之后，我们还会回到这里，到时候我会指出如果精确匹配设计师的原型图会有哪些问题。

我们还定义了一个按钮模块，默认的外观是白色按钮，带有绿色的边框和文字。页面的主文字区域底部使用的按钮就是默认样式。然后我们还为按钮定义了一个CTA变体，使用纯绿色背景和白色文字（之前也解释过，CTA，即Call To Action，是一种针对核心元素的营销手段，希望引导用户使用；在这个例子中，CTA按钮即醒目的开始按钮）。最后，我们为图12.8所示的三栏主区域添加样式。

**图12.8 页面主区域的大概样式**

> [p311 图一]

页面主区域由以下几部分组成：限制了最大宽度的容器、控制三栏布局的`tile-row`类和每一栏内的白色图文块区域`tile`类。把下列清单中的代码添加到样式表，其中也包含了页脚部分的样式。之前添加过按钮样式，这里不需要再考虑这部分。

**清单12.5 三栏和图文块样式**

> [p311 代码清单一]
>
> [p312 代码清单一]
>
> Same 1,080 px constrained width as with other page sections 和页面其他部分一样，设置最大宽度为1080px
>
> Makes each column equal width 使所有栏目等宽
>
> Same 1,080 px constrained width as with other page sections 和页面其他部分一样，设置最大宽度为1080px

这里的清单又一次使用了双容器模式，将宽度限制为最大1080px。同时为图文块区设置了白色背景和边框圆角。

页脚部分也是应用了对比，不同的是，这里并非吸引注意力，而是淡化注意力。这部分设置了浅灰色背景，并且使用更小的字号和灰色文本。因为这部分是整个页面上最不重要的内容，不需要视觉上的突出。从另一个方面讲，使用让人容易忽视的配色就仿佛在告诉用户：“页面的这部分内容并不是你要找的”。

### 12.2.1 理解颜色表示法

我们调色板里的颜色都是使用十六进制表示法指定的。这是一种简洁明了的表示法，从web早期就被众多开发者广泛使用。但这种颜色表示法并不是特别好用。现代CSS已经支持多种其他的颜色表示法，比较常见的有`rgb()`和`hsl()`函数。

`rgb()`函数是一种描述红、绿、蓝彩色值的颜色表示法，使用十进制而非十六进制。它使用0~255取代了00~FF，比如`rgb(0, 0, 0)`代表纯黑色（相当于`#000`），`rgb(136, 0, 0)`代表砖红色（相当于`#800`）。

不论是RGB，还是十六进制，理解起来都有点晦涩。我们见到一个颜色值，比如#2097c9，或者它对应的RGB颜色，没办法联想到它在页面会渲染成什么样。可以尝试分解一下，它的红色值（20）非常少，绿色值（97）处于中等水平，蓝色值（c9）相对较多。可以分析得出是蓝色和绿色占主导，但是有多暗或者多亮呢？事实上，RGB颜色表示法很不直观，它们本来就是为计算机读取设计的，不适合人类。

`HSL`则是一种更适合人类读取的颜色表示法，代表色相、饱和度和明度（或者光度）。HSL的语法看起来就像`hsl(198, 73%, 46%)`这样，相当于十六进制表示的`#2097c9`。

`hsl()`函数需要3个参数。第一个参数表示色相，是一个0-359之间的整数值。这代表色相环上的360度，从红色（0）、黄色（60）、绿色（120）、青色（180）、蓝色（240）、洋红色（300）依次过渡，最后回到红色。第二个参数表示饱和度，是一个代表色彩强度的百分数，`100%`的时候颜色最鲜艳，`0%`就意味着没有彩色，只是一片灰色。第三个参数表示明度，也是百分数，代表颜色有多亮（或者多暗）。大部分鲜艳的颜色都是使用`50%`的明度值，设置得过高会使颜色变浅，`100%`就会变成纯白；设置得太低会使颜色变暗，`0%`会成为黑色。举个例子，`hsl(198, 73%, 46%)`这个颜色值，包含了青蓝色的色相、偏高的饱和度（73%）和接近50%的明度，所以将会生成一个比天蓝色稍深一些的蓝色。

表12.1列出了几种颜色，并对比了它们的十六进制、RGB、HSL和颜色命名等多种表示法。（一共有大约150种命名颜色可以在CSS中使用）

**表12.1 颜色表示法和颜色值的对比**

> [p313 表一]

熟悉HSL最好的办法，就是去使用它。推荐一个网站[http://hslpicker.com/](http://hslpicker.com/)，这个网站提供了一个交互式颜色选择器，有3个滑动条分别用来选择3个参数值，还有一个用来设置透明度。可以尝试拖动一下滑动条，看看它们是如何影响最终生成的颜色的。

> **注意**
>
> RGB和HSL表示法都有一个对应的包含alpha通道的表示法：`rgba()`和`hsla()`。它们接受第四个参数，一个介于0和1之间的数字，用来表示透明度。除此之外，一些浏览器也开始支持八位的十六进制表示法，其中最后两位用来设置alpha通道值。

**在浏览器中转换颜色**

下面我们把十六进制颜色值转换成HSL表示法。很多在线资源可以为我们提供全部三种表示法，比如hslpicker.com。但是最简单的转换方式还是使用Chrome或者Firefox浏览器的开发者工具，因为我们经常开着它们。我们来演示一下在Chrome里面如何实现。

页面加载完成之后，打开浏览器的开发者工具（Mac里面快捷键是`Cmd+Option+I`，Windows里面是`Ctrl+Shift+I`）。在Elements面板下，点击并选中`<html>`标签，相应的样式就会展示在Styles面板下，其中也包括自定义的属性（如图12.9所示）。

**图12.9 应用的颜色都展示在了开发者工具的Styles面板下，按住Shift并点击颜色值旁边的小方块，可以循环展示十六进制、RGB和HSL表示法。**

> [p314 图一]

每个颜色值旁边都有一个小方块，用来展示颜色示例。如果你按下Shift健，用鼠标点击这个小方块，十六进制值就会变成RGB值；再次点击，RGB值就会变成HSL值；第三次点击又重新变回十六进制表示法。

> **注意**
>
> 这种循环变换颜色表示法的技巧也适用于Firefox开发者工具。有点可惜的是，在Firefox浏览器中，只有正常的属性值才会工作，我们例子中这种自定义属性指定的颜色值不能工作。

如果你想更深入一些，单击小方块可以打开一个全色选择器对话框（如图12.10所示）。然后你就可以更精细地调整颜色，也可以从调色板中选择颜色，或者切换十六进制、RGB和HSL表示法。对话框里还包含一个滴管工具，可以直接从页面里提取颜色。Firefox提供了类似的颜色选择器，但是功能没有这么全面。

**图12.10 使用颜色选择器对话框微调颜色**

> [p315 图一]

**把样式表切换为HSL颜色**

十六进制颜色一般就可以满足需求了，但是转换成HSL值可以更方便地进行颜色微调，也更容易找到可以添加到网站的新颜色。我们把网站的颜色都转换成HSL格式，并且观察一下它们。

复制开发者工具里面的HSL颜色值，粘贴到样式表中。然后样式表中的对应部分将会如下面代码清单所示：

**清单12.6 把十六进制颜色转换成HSL值**

> [p315 代码清单一]
>
> Green colors all have the same hue. 绿颜色都使用相同的色相
>
> The text and gray colors aren’t pure gray. 文本颜色和灰色都不是纯灰

把颜色都改成HSL表示法之后，有些事情就变得显而易见了。首先，你会发现三种绿色都使用了相同的色相值。如果不看浏览器，你很难一下子认出162表示一种蓝绿色，但你却很容易发现这三种颜色之间存在相似的地方。如果使用十六进制值，你很难察觉到，但是换成HSL值就变得比较明显。了解这些之后，在调色板中再加一种绿色就会变得很容易。如果需要用到同样颜色的较浅色调，我们就可以尝试写`hsl(162, 50%, 80%)`，然后在浏览器的开发者工具里微调饱和度和明度，直到看上去合适为止。

你也会发现灰色并不是纯灰，它们有相同的色相值，也各自有不太大的饱和度值。单看颜色本身，你可能发现不了这些，但就是这些小细节，让我们的页面看上去更丰富多彩。真实世界里几乎不存在完全无彩的灰色，而且我们的眼睛也乐于看到光彩，哪怕极淡。

> **注意**
>
> 设计师一般会在调色板中使用多个不同程度的灰色。按照我的经验，准备得再充分，还是避免不了需要其他的灰色。不论是比超浅灰更浅的颜色，还是介于灰色和浅灰之间的颜色，需求总是可能存在的。这样一来，变量命名就成了问题。基于这样的原因，可以考虑使用数值来命名，比如`--gray-50`或者`--gray-80`，这里的数字大致等于明度值。使用这样的命名方式就可以很容易在已有的颜色之间再插入一个，有需要随时添加就可以了。

总之，在实际项目开发中，我们没有必要把所有的颜色都转换成HSL格式。什么时候有需要了，使用HSL可以更方便地处理颜色。

### 12.2.2 添加新颜色到调色板

有时候可能会需要某种颜色，但是设计师没有提供，比如红色的报错信息或者蓝色的文本框。有经验的设计师一般会对这种情况提供通用解决方案，但作为开发者，在需要为调色板添加新颜色的时候，我们依然需要思考我们自己的解决方法。

样式表里已经为链接激活状态的颜色保留了位置。激活的链接一般是红色，这是用户代理的样式表提供的。但这种红色偏亮，看起来有些卡通，在当前页面不是非常合适。我们需要找一种不太亮的颜色来配合页面整体的绿色。

为某种颜色寻找一个搭配的颜色，最简单的方式是找到它的`补色`（complement）。补色位于色相环的对侧位置，蓝色的补色是黄色，绿色的补色是洋红色（或者紫色），红色的补色是青色。

使用HSL颜色值的时候，计算补色非常简单，为色相值加上或者减去180即可。核心颜色品牌绿的色相值是162，加上180得到342的新色相值，这是个红色，带一点点洋红。我们也可以通过减去180来寻找补色，得到了-18的色相值。色相-18其实等同于色相342，所以`hsl(-18, 87%, 21%)`和`hsl(342, 87%, 21%)`将会渲染成同样的颜色。但是建议把色相值保持在0-360的范围内，因为这个范围内的颜色与色相对应关系我们比较熟悉一些。

现在有了色相值，我们还需要饱和度和明度。页面上的通用链接颜色是中绿色（`hsl(162, 73%, 46%)`），那我们就从这里入手。因为绿色是主要的品牌颜色，我们不希望另一种颜色偷走太多目光，所以就把饱和度稍微调低一些，比如低10%。这样就得到了新颜色`hsl(342, 63%, 46%)`。图12.11展示了这种红色的链接激活状态。

**图12.11 红色的激活状态**

> [p317 图一]

把新颜色添加到样式表，按下面清单编辑代码。代码中为新颜色指定了自定义属性`--red`，然后就可以使用它设置激活链接了。

**清单12.7 添加新的红色到调色板**

> [p317 代码清单一]
>
> Assigns a red variable 自定义一个red变量
>
> Uses the variable for active links 在激活链接上使用变量

完成了以上这些，重新加载页面并查看实际效果。因为链接的激活状态不是默认显示的，这稍微有点麻烦。我们需要单击并保持在链接上，才能触发激活，一旦松手又会变回绿色。简单起见，我们可以使用开发者工具强制激活链接。

右键点击链接，在菜单中选择“检查”或者“查看元素”，就可以打开开发者工具。如图12.12所示，在Elements面板，右键点击`<a>`标签，在菜单中选择`:active`①（在Firefox浏览器中选择`active`）。（【译者注①】在最新的Chrome浏览器中，需要在`Force state`的二级菜单中选择`:active`。）这样就可以强制浏览器显示元素的激活样式。

元素被强制为激活状态，我们就可以查看红色是什么样了。如果有需要，就可以在开发者工具里实时修改样式并查看如何影响元素。

**图12.12 开发者工具可以强制设置元素为激活、悬浮、聚焦或者浏览过等状态，这样开发者就可以预览相应状态下的样式了**

> [p318 图一]

怎么选择合适的颜色并没有什么标准的解决方案，而使用HSL确实会简单一些。先找到页面已有颜色的互补色，然后在开发者工具里面调整饱和度和明度，一般就可以找到看上去还不错的颜色。

如果你想更深入地研究颜色选择，可以上网浏览颜色理论相关的文章。可以从Natalya Shelburne所写的这篇著名的文章起步，详见[http://tallys.github.io/color-theory/](http://tallys.github.io/color-theory/)。

### 12.2.3 思考字体颜色的对比效果

你可以已经注意到了，字体颜色都是深灰色，而不是纯黑（#000）。从HSL颜色值可以看出，明度值是15%，而不是0%。使用灰色而非纯黑是通用的做法。在背光式电脑屏幕上，纯白色背景（`#fff`）上的纯黑色文本会产生强烈的对比效果，很容易在阅读的时候产生视觉疲劳，特别是大段的文本。黑色背景上的白色文本也会产生同样的问题。在这种情况下，要么用深灰色代替黑色，要么用浅灰色代替白色，或者都替换掉。对用户来讲，看上去依然是黑白的，但阅读的时候会感觉舒适许多。

我们不想让文本产生过于强烈的对比效果，同样也不希望对比效果太差。浅灰色背景上的灰色文本同样难以阅读，甚至会使用户的视力受损。日光照射下的智能手机，读起来也是类似的情况。那么我们怎样才能实现适当的对比效果呢？

为了帮助我们判断，W3C的Web内容无障碍指南（WCAG，Web Content Accessibility Guidelines）提供了关于对比度最小值的建议（称为AA级），更严格一点，还有加强型对比度（称为AAA级）。鉴于大号文本更易于阅读，两个级别都对大号文本的对比度适当放宽了限制。表12.2展示了建议的对比度：

**表12.2 WCAG文本对比度建议**

> [p319 表一]
>
> Regular text 普通文本
>
> Regular text 大号文本

WCAG定义的大号文本，是指未加粗的18pt（24px）及以上大小的文本，或者加粗的14pt（18.667px）及以上的文本。也就是说，正文字体应该达到或者超出普通文本建议的对比度，标题文本应该达到或者超出大号文本建议的对比度。

WCAG同样提供了一个计算对比度的公式，但我从来不为数学计算操心，因为使用工具更简单。在线就有很多可用的工具，搜索“CSS颜色对比检查器①”（CSS color contrast checker）可以查看。（【译者注①】这里建议使用搜索引擎直接搜索英文，中文可能搜不到。）

每个工具都各有优劣，我比较喜欢的一个是[http://leaverou.github.io/contrast-ratio](http://leaverou.github.io/contrast-ratio)。这款检查器支持所有可用的CSS颜色格式。把背景颜色和文本颜色粘进去，就可以显示计算好的对比度（如图12.13）。鼠标划到数字上，就可以查看是否通过了WCAG的哪种字号的AA级或者AAA级。

**图12.13 背景颜色和文本颜色计算得出15.1:1的对比度**

> [p319 图一]

众多的设计图中，并不见得每处文字都要达到AAA对比级别，WCAG的建议也提到了这些。比较好的处理方案是主体文本达到AAA级别，对于那些彩色标签或者其他装饰性文字，可以稍微随意一点，达到AA级别就好。

同时，要意识到并不是通过了数学计算就万事大吉了。因为有一些字型并非那么易读，尤其是在设计中使用了细体字的时候。图12.14展示了同一段文字的两个副本。虽然两个副本使用了相同的颜色，但感知到的对比度却不一样。

**图12.14 虽然颜色相同，但是纤细字体导致了视觉上的对比度不足**

> [p320 图一]

图12.14的两个段落都使用了Helvetica Neue字体。但左侧段落设置字体粗细为300（一般称为较轻或者书籍装帧），右侧段落设置字体粗细为100（纤细）。7:1的对比度对于左侧的文字来说效果已经很好了，但是对于右侧文字可能需要更高的对比度。

> **小贴士**
>
> 只有部分字体提供了纤细的字重，使用的时候为保证可读性，一定要记得设置强烈的颜色对比。

## 12.3 间距

搞清楚了颜色之后，我们把目光投向设计师在原型图中标注的那些精确的间距。开发过程中，这部分工作相对比较枯燥，而且后期设计师审查的时候可能还会反复调整，指出一些需要解决的跟原型图不一致的实现。

这部分工作里的大多数内容可以简单归结为正确设置元素的外边距，也算是从最容易的地方开始，哪怕后面可能需要再做一些调整。我们需要思考两件事情，一个是是否需要使用相对单位，另一个是行高如何影响垂直间距。

### 12.3.1 使用em还是px

考虑使用相对单位还是绝对单位，这是非常重要的决定。设计师一般都使用像素来标注距离，所以使用绝对单位会比较容易。但是使用相对单位会带来很多好处，不论em还是rem。

我们来看一下导航菜单里标注的距离（如图12.15），每个子项之间需要10px，子项底边与导航条底部边界之间也是10px。

**图12.15 每个导航项之间和周围都需要10px**

> [p320 图二]

整个第二章我们都在讨论使用相对单位的好处，尤其是可以使用响应式字号（`font-size:calc(0.5em+1vw)`），这就允许我们的设计可以按比例缩放字体。在较大的屏幕上，字号就可以相应变大，基于em和rem的外边距也随之变大。好处也体现在用户修改了浏览器的默认字号的时候。

这种使用响应式字号的技巧相对比较新，所以大部分设计师不太习惯使用相对单位。如果你打算使用这个技巧，可能需要先跟设计师讨论一下。而且你必须自己去做单位转换。

如果决定使用像素单位，那么短期内看你的工作会比较轻松，但这也意味着后面的设计将缺少弹性。有可能会导致将来有更大的工作量，当然这也不一定。如果决定使用相对单位，前期需要多做一些工作，但是设计会更强大稳固。

因为使用像素相对比较简单（比如在需要的时候直接设置外边距或者内边距为10px），我们使用em来实现导航菜单，演示比较复杂的实现过程。

在设计规范中，导航条里的标注测量值显示菜单项需要10px的环绕间距（图12.15）。因为基础字号是16px，我们计算一下，使用期望长度除以基础字号，10除以16得到0.625，所以这里的间距就是0.625em。现在可以把下面清单中的代码添加到样式表：

**清单12.8 使用padding和margin设置导航区域的间距**

> [p321 代码清单一]
>
> Adds 10 px top and bottom padding to the whole navbar 为整个导航条的顶部和底部添加10px的内边距
>
> Removes the list margin applied from the user agent stylesheet 移除用户代理样式表为列表元素默认添加的外边距
>
> Adds a 10 px horizontal margin between each nav item 每个导航项之间添加10px的水平外间距

处理间距的时候，需要知道什么时候使用内边距，什么时候使用外边距。在这个例子中，`nav-container__inner`应该使用内边距来设置垂直间隔，这样就可以应用到整个容器，最左侧的页面标题和顶部导航列表都可以填充间距。然后使用外边距来设置每个导航项之间的水平间隔，因为我们希望每项之间有间隔。

横幅图片下面和三栏之间的间隔也比较简单。因为这些间隔都是应用于元素外部，不论是带背景图片的元素还是设置背景色的元素，所以需要使用外边距来实现间隔。

**图12.16 横幅图片下面（40px）和栏目之间（25px）的外边距**

> [p322 图一]

再次使用像素值除以基础字号，把长度转化为em单位。横幅图片下方的40px相当于2.5em（40/16=2.5），每个栏目之间的25px相当于1.5625em（25/16）。添加下列清单中展示的这些外边距：

**清单12.9 为横幅图片下边和栏目之间添加外边距**

> [p322 代码清单一]
>
> Ensures 40 px space beneath the hero image 确保横幅图片下方有40px的间隔
>
> Adds 25 px between each column 每个栏目之间添加25px的间隔

类似这种的容器（带有背景图片或者背景颜色），它们之间的间隔实现起来相对比较简单。如果需要调整文本行之间的间距，比如段落或者标题里面的文本，那就会有一些麻烦。

### 12.3.2 思考一下行高

视觉稿里的文字周围也设置了一些间距，图12.17标注了这些尺寸。（这里可能有点看不清楚，这是一个白色文字栏，背景是很浅的浅灰色。顶部和左侧，距离白色文字栏的边缘各有25px的距离。）

**图12.17 文字栏内部和文字周边需要设置的间距**

> [p323 图一]

文字周围环绕的25px间隔，可以考虑为文字栏添加内边距来实现，25/16=1.5625em。标题和正文段落之间的30px，就不是这么简单了。如果你打算在两个元素之间设置30px的外边距，那么实际上这两行文字之间的间隔差不多是36px。要理解为什么会这样，需要先看一下元素高度是怎么定义的。

在盒模型中，元素的内容盒子是被内边距环绕的，然后是边框，最后是外边距。但是对于段落和标题这样的元素，内容盒子并不是只有显示出来的文字区域，元素的行高决定了内容盒子最终的高度，是要超出字符的顶部和底部的。图12.18可以解释这一点。文字高度是1em，但是行高超出了文字上下边缘一点儿。

**图12.18 行高定义了内容盒子的高度**

> [p323 图二]
>
> Line height 行高
>
> Margin 外边距
>
> Perceived space 实际看到的高度

网页里的行高是1.4，这是从`<body>`元素上设置并继承下来的。所以，只有一行文字的元素，内容盒子的高度就是1.4em，文字在内部垂直居中。字号是16px，那么内容盒子的最终高度就是22.4px。额外的6.4px平均分配到文字的上面和下面。

所以，如果为标题设置30px的底部外边距，那么外边距的顶部和标题文字之间实际上会多出来3.2px。外边距的下方，段落的内容盒子同样会多出来3.2px（超出的间距是一样的，因为标题和段落有同样的行高和字号）。这样就会导致标题文字和段落文字之间的实际间隔是36.4px。

> **注意**
>
> 设计师习惯使用`行距`（leading），用来表示每行文字之间的间隔距离。在CSS中，文字间距实际是由行高控制的，并不能直接转换成行距。下一章我们会研究一下如何调整这个间距。

设计师通常不会在意一两个像素的实现差异，但相差太多就该找你了。一般来讲，行高越大，或者元素设置的字号越大，越不容易察觉到实现上的不一致。

要解决这种实现差异，就需要算出额外的间距并在外边距中减去它。不要设置30px的外边距了，减去额外的6px，得到的是24px。再除以16，最终得到1.5em。把下面清单中的代码添加到样式表中。

**清单12.10 设置文字栏和段落间隔**

> [p324 代码清单一]
>
> Adds margins to paragraphs in your base styles 在基础样式中为段落添加外边距
>
> Adds padding inside the tiles 在文字栏内部增加内边距
>
> Adds the margin beneath the tile headings 在文字栏标题下方添加外边距

我们已经在基础样式中为段落设置1.5em的外边距，整个网页所有的段落都会有同样的间隔。然后在文字栏题目下方设置了一样的距离（`.tile > h4`），不管后面有没有段落元素，标题下方的间距都会一直相同。这是由于存在外边距折叠，两个外边距会重叠，在标题和段落之间生成一个30px的间隔。

设计稿里只剩最后一组距离需要实现了，那就是横幅图片中环绕标语的间距。这部分设计稿如图12.19所示。

**图12.19 设计稿需要在标语上方设置95px的间隔，下方设置16px的间隔（标语和按钮之间）**

> [p325 图一]

标语的行高一样会影响到设置这些间距，因为它的字号更大。标语字号是1.95rem，这就意味着乘以16px的基础字号之后，实际是31.2px。然后再乘以1.4倍的行高，最终算出行高是43.68px，文字的上方和下方各有大约6px。

既然行高已经在文字上方占据了6px，我们只需要再增加89px的间隔，就达到了期望的95px。同样的道理，标语下方只需要再增加10px，就达到了设计稿中显示的16px间隔。这里面涉及了大量的数学计算，其实最简单的解决办法是和设计师一起坐下来，在浏览器里实时修改这些间距，直到让设计师满意为止。

现在我们已经知道需要为标语上方添加89px的间隔，下方添加10px的间隔，接下来就是把这些值转化为相对单位并添加到样式表。89/16得到5.5625em，10/16得到0.625em。把下面清单中的这部分代码更新到样式表中，为标语设置位置并添加注释。

**清单12.11 在横幅图片中设置标语和按钮的位置**

> [p325 代码清单一]
>
> Replaces the rough estimate with the newly calculated spacing 使用刚刚计算得到的距离替换之前的估值
>
> Removes the top margin as the hero__inner padding provides all the space needed 移除上方的外边距，因为hero_inner的内边距已经提供了所需的间隔
>
> Defines the space between the slogan and the button 设置标语和按钮之间的间隔

`hero__inner`元素的顶部内边距设置了标语上方所需的间隔。虽然设计稿中没有指定它的右侧和底部内边距，但我们也设置了值。标语的顶部外边距设置为0，这样就不会在`hero__inner`的内边距上再增加额外的距离。标语的底部外边距使用rem单位而不是em单位，这是因为标语不是使用默认的16px字号。

### 12.3.3 为行内元素设置间距

网页设计稿中还有最后一处细节需要实现。中间的栏目里有个操作系统列表，只有在这些操作系统中才可以运行Ink应用（图12.20）。之前我们把它们放在了一个无序列表里面，现在我们按照原型图设计的样子把它们放在一行展示。

**图12.20 列表项需要添加样式并实现行内展示**

> [p326 图一]

这种微型布局的设计在一些标签形的东西展示上是很常见的，比如博客文章的标签列表或者商品的分类。我们在这里也使用这样的设计，是因为这可以带来一些你可能比较熟悉的有意思的东西。

这种布局有多种实现方式，弹性盒和行内元素是两种比较容易想到的。书中前面已经见过很多弹性盒布局了，这里可以考虑使用行内元素来实现。

很容易就能想到一些样式。每个单项都需要设置`display: inline`，还需要少许的内边距、背景颜色和边框圆角。开始的时候感觉设置这些样式就够了，但是一旦内容出现折行，就暴露问题了。如图12.21展示的结果，由于视口的宽度是固定值或者如果内容持续增加，这就可能会发生。

**图12.21 折行的时候，列表项发生重叠**

> [p326 图二]

每一行列表项的灰色背景会和另一行的列表项重叠，原因就在于行高。前面讲到过，文本行的高度是由行高乘以字号决定的。如果为行内元素添加内边距，元素本身将会变高，却不会增加文本行的高度。文本行的高度只由行高来决定。

要解决这个问题，就需要增加每个列表项的行高。更新下列清单中的代码，为页面中的这些标签添加样式。然后可以试着改变行高的值，看看会产生什么影响。

**清单12.12 为标签添加样式**

> [p327 代码清单一]
>
> Overrides user agent list styles 覆盖用户代理默认的列表样式
>
> Sets a large line height to add vertical space when line wrapping 设置很大的行高，折行的时候增加垂直间距

只有行内元素有这种行为。如果一个元素是弹性子元素（或者行内块级元素），为了容纳它，其所在的行会随之增高。当然我们一样需要设置水平和垂直外边距，为项目之间增加间隔。利用原本就有的白色背景，这些元素之间就产生了我们想要的间距。

> **注意**
>
> 注意Windows Phone这个子项，行内元素是允许折行的。但在弹性盒子或者行内块中，不允许折行，而是整个元素折下来多出一行。最终选择哪种实现方式来解决问题，取决于实际情况，不管怎样，这是一个需要注意的地方。

这样就完成了整个页面的实现，看起来应该符合图12.22所示的全部设计原型。

我们用了很多时间来分析这些细节。很多开发者在实现网页的时候不太在意细节，但只有做好细节才能做出好作品，正是这些细节体现出了普通和优秀的差别。

在你写CSS的时候，我一直在鼓励你花些时间来思考一下设计。即使你做的没有设计师那么专业，也要相信自己的眼光。试着这里调大一点距离或者那里调小一点距离，看看哪种看起来更好，多花点儿时间来调试。不要过分使用颜色，只是有选择地放在需要唤起用户注意的地方。创建表现一致的图样，然后打破这些规律的图样就可以把用户的目光吸引到页面最重要的东西上了。

**图12.22 完成页面设计**

> [p328 图一]

**总结**

- 选择性地使用对比，把用户注意力吸引到页面上重要的部分；
- 使用HSL颜色格式，让颜色处理更简单更易于理解；
- 设计师执着于细节的时候，要相信他们的判断；
- 多花些时间来调整间距；
- 牢记行高可以影响垂直间距。